<?php

namespace Main\DefaultBundle\Repository;

use Doctrine\ORM\EntityRepository;
use Main\DefaultBundle\Entity\User;
use Proxies\__CG__\Main\DefaultBundle\Entity\Dictionary;

/**
 * DictionaryScoreRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class UserRepository extends EntityRepository
{
    public function getArray(User $u)
    {
        $d = $u->getDefaultDictionary();

        $score = $this
            ->getEntityManager()->getRepository('MainDefaultBundle:Result')->getAvgScore($u);

        return array('id' => $u->getId(), 'score' => $score, 'dic' => $d->getJsonArray());
    }
}
